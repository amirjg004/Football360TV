<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>فوتبال ۳۶۰ | نسخه تلویزیون با ریموت</title>
  <style>
    body, html { margin:0; padding:0; height:100%; overflow:hidden; background:#000; }
    iframe { border:none; width:100%; height:100%; }
    /* TV focus style */
    .tv-focusable:focus { outline: 6px solid lime !important; outline-offset: 4px !important; box-shadow: 0 0 30px lime !important; transform: scale(1.08) !important; }
    * { cursor: none !important; }
  </style>
</head>
<body>

<iframe id="original" src="https://tv.football360.ir/" allowfullscreen></iframe>

<script>
// === FULL TV REMOTE NAVIGATION INJECTED INTO THE ORIGINAL SITE ===
const iframe = document.getElementById('original');
iframe.onload = () => {
  const doc = iframe.contentDocument;
  if (!doc) { console.error("Cannot access iframe – site blocked it"); return; }

  // Inject styles
  const style = doc.createElement('style');
  style.textContent = `
    .tv-focusable, button, [role="button"], a, .back, div[onclick], [jsaction] { transition: all 0.2s !important; }
    .tv-focusable:focus, button:focus, [role="button"]:focus, a:focus, .back:focus, div[onclick]:focus {
      outline: 6px solid lime !important; outline-offset: 6px !important;
      box-shadow: 0 0 40px lime !important; transform: scale(1.1) !important; z-index: 999999 !important;
    }
    * { cursor: none !important; }
  `;
  doc.head.appendChild(style);

  // Make everything focusable + big play overlay
  const makeFocusable = () => {
    doc.querySelectorAll('button, a, [role="button"], .back, div[onclick], [jsaction], .channel-card').forEach(el => {
      el.tabIndex = el.tabIndex === -1 ? 0 : el.tabIndex;
      el.classList.add('tv-focusable');
    });

    // Big playable overlay for the video player
    const playerWrapper = doc.querySelector('div[class*="player"]') || doc.querySelector('video')?.parentElement;
    if (playerWrapper && !doc.getElementById('tv-overlay')) {
      const overlay = doc.createElement('div');
      overlay.id = 'tv-overlay';
      overlay.tabIndex = 0;
      overlay.classList.add('tv-focusable');
      overlay.style = 'position:absolute; inset:0; z-index:999; background:transparent;';
      overlay.onclick = () => doc.querySelector('video')?.dispatchEvent(new Event('click'));
      playerWrapper.style.position = 'relative';
      playerWrapper.appendChild(overlay);
    }
  };
  makeFocusable();
  new MutationObserver(makeFocusable).observe(doc.body, { childList:true, subtree:true });

  // Simple spatial navigation + remote keys
  let current = null;
  const move = (dir) => {
    const items = [...doc.querySelectorAll('.tv-focusable, button, a, [role="button"]')].filter(el => {
      const r = el.getBoundingClientRect();
      return r.width > 30 && r.height > 30;
    });
    if (!current) { items[0]?.focus(); current = items[0]; return; }
    const rect = current.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top + rect.height/2;
    const candidates = items.filter(el => {
      const r = el.getBoundingClientRect();
      const dx = r.left + r.width/2 - cx;
      const dy = r.top + r.height/2 - cy;
      switch(dir) {
        case 'left': return dx < -50;
        case 'right': return dx > 50;
        case 'up': return dy < -50;
        case 'down': return dy > 50;
      }
    });
    if (candidates.length) {
      candidates[0].focus();
      current = candidates[0];
    }
  };

  doc.addEventListener('keydown', e => {
    switch(e.key) {
      case 'ArrowLeft': move('left'); e.preventDefault(); break;
      case 'ArrowRight': move('right'); e.preventDefault(); break;
      case 'ArrowUp': move('up'); e.preventDefault(); break;
      case 'ArrowDown': move('down'); e.preventDefault(); break;
      case 'Enter': case ' ': e.preventDefault(); doc.activeElement?.click(); break;
      case 'Backspace': case 'Escape': history.back(); break;
    }
  });

  // Auto focus first item
  setTimeout(() => doc.querySelector('.tv-focusable, button, .back')?.focus(), 2000);
};
</script>
</body>
</html>
